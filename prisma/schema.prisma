
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                    String    @id @default(uuid()) @db.Uuid
  name                  String                                   // udin 
  email                 String    @unique                        // udin@gmail.com
  password              String                                   // udinPetot
  role                  String    @default("u") @db.VarChar(1)   // 'u'
  nomorKendaraan        String    @default(" ")                  // ' '
}

model Angkot {
  id                  String      @id @default(uuid()) @db.Uuid
  latitude            Float
  longitude           Float
  jumlahKursi         Int                                                                // 12
  activeNonActive     Boolean     @default(true)                                         // true
  warna               String[]                                                           // ['hijau' , 'kuning']
  currentTrayekId     String?     @db.Uuid                                               // trayek.id
  currentTrayek       Trayek?     @relation(fields: [currentTrayekId], references: [id]) // Trayek aktif
}

model Trayek {
  id                  String      @id @default(uuid()) @db.Uuid
  namaTrayek          String                                    // Contoh: "Cicaheum - Kebon Kelapa"
  lokasiAwal          String
  lokasiAkhir         String
  rute                Json                                      // Rute perjalanan, misalnya koordinat GPS
  angkots             Angkot[]                                  // Angkot-angkot yang dapat menggunakan trayek ini
}


model RiwayatPerjalanan {
  id                    String                @id @default(uuid())  @db.Uuid
  userId                String                   
  tanggal               DateTime              @default(now())
  estimasiTarif         Float                                                 // "Rp. 12.000.00"
  userTrayeks           String                                                // "Cicaheum - Kebon Kelapa"
}